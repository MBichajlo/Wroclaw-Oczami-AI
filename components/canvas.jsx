"use client";
import React, { useEffect, useRef } from "react";

const Canvas = (props) => {
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    const context = canvas.getContext("2d");
    context.globalCompositeOperation = "multiply";
    const e = props.elements;

    var image = new Image();
    image.src = e.mask;
    image.onload = function () {
      canvas.width = image.width * 0.5;
      canvas.height = image.height * 0.5;
      context.drawImage(image, 0, 0, canvas.width, canvas.height);
      const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      for (let i = 0; i < data.length; i += 4) {
        if (data[i] == 255) {
          data[i] = e.color;
          data[i + 1] = 0;
          data[i + 2] = 0;
        } else {
          data[i + 3] = 0;
        }
      }
      // console.log(imageData);
      context.putImageData(imageData, 0, 0);
      context.save();
    };

    // image.src =
    //   "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABUMAAAcHCAAAAADCmD0ZAAATfklEQVR4nO3d2XLjOBJAUWii//+XOQ92eZUsEcSSCZzz0FHT5ZiWsFyC9FYKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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";

    // console.log(image);

    // context.fillStyle = "red";
  }, []);

  return (
    <canvas
      ref={canvasRef}
      className='canvas_class'
    ></canvas>
  );
};

export default Canvas;

// var myImg =ctx1.getImageData(0, 0, canvas1.width, canvas1.height);
